#pragma checksum "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f000ec9e7283d0eef3cd0b7144d71674b29ae7e5"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Ventas_Create), @"mvc.1.0.view", @"/Views/Ventas/Create.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\_ViewImports.cshtml"
using ProyectoVentasAB;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\_ViewImports.cshtml"
using ProyectoVentasAB.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f000ec9e7283d0eef3cd0b7144d71674b29ae7e5", @"/Views/Ventas/Create.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1c030ea2c4cc6c2dd5b9285417720c84d3cc03de", @"/Views/_ViewImports.cshtml")]
    public class Views_Ventas_Create : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<ProyectoVentasAB.Models.tblVentas>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "Index", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("btn btn-warning btn-block"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 3 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
  
    ViewData["Title"] = "Venta";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

<br />
<div class=""row"">
    <div class=""col-lg-12"">

        <div class=""card "">
            <div class=""col-12 form-inline"">
                <table class=""table"">
                    <thead class=""bg-primary"">
                        <tr>
                            <td colspan=""3"" class=""text-center text-uppercase""><h4>Datos</h4></td>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>
                                <input type=""number"" placeholder=""Código"" name=""codigo"" id=""codigo"" class=""form-control"" />
                            </td>
                            <td>
                                <input type=""date"" placeholder=""Fecha: "" name=""fecha"" id=""fecha"" class=""form-control"" readonly />
                            </td>

                            <td>
                                <select name=""IdTienda"" class=""form-control"">
");
#nullable restore
#line 32 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                     foreach (var tienda in ViewBag.Tienda)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f000ec9e7283d0eef3cd0b7144d71674b29ae7e55691", async() => {
#nullable restore
#line 34 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                                                    Write(tienda.NombreTienda);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 34 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                           WriteLiteral(tienda.IdTienda);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 35 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>


            <div class=""col-md-12"">
                <table class=""table"">

                    <thead class=""alert-link"">
                        <tr>
                            <td colspan=""3"" class=""text-center text-uppercase""><h4>Producto</h4></td>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>
                                <select name=""idProducto"" class=""form-control"">
");
#nullable restore
#line 57 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                     foreach (var producto in ViewBag.Producto)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f000ec9e7283d0eef3cd0b7144d71674b29ae7e58971", async() => {
#nullable restore
#line 59 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                                                        Write(producto.NombreProducto);

#line default
#line hidden
#nullable disable
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
            BeginWriteTagHelperAttribute();
#nullable restore
#line 59 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                           WriteLiteral(producto.IdProducto);

#line default
#line hidden
#nullable disable
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 60 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                </select>

                                <input type=""text"" placeholder=""idProducto"" name=""idPro"" id=""idPro"" class=""form-control"" readonly />

                            </td>

                            <td>
                                <input type=""text"" placeholder=""Dato"" name=""dato"" id=""dato"" class=""form-control"" readonly />

                                <input type=""number"" placeholder=""cantidad"" name=""cantidad"" id=""cantidad"" class=""form-control"" />
                            </td>

                            <td>
                                <input type=""number"" placeholder=""Precio"" name=""precio"" id=""precio"" class=""form-control"" />

                                <button id=""btnEnviar"" class=""btn btn-info col-12"">Enviar </button>
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>
    </div>


    <div class=""col-md-12"">
        <");
            WriteLiteral(@"div class=""card"">
            <div class=""card-body"">
                <div class=""table-responsive"">
                    <table class=""table table-bordered table-hover"">
                        <thead class=""alert-info"">
                            <tr>
                                <td>#</td>
                                <td>Nombre</td>
                                <td>Cantidad</td>
                                <td>Precio $</td>
                                <td>SubTotal</td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id=""fila"">
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>
                                    <input type=""hidden"" class=""form-control"" name=""subt1"" id=""subt1"" value=""0"" />
   ");
            WriteLiteral(@"                             </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class=""card-footer"">
                    <table class=""col-12"">
                        <tr>
                            <td> <label for=""total"">Total: $</label></td>
                            <td><input type=""number"" name=""total"" id=""total"" class=""form-control col-6"" readonly /></td>
                            <td><button class=""btn btn-success btn-block"" name=""btnEnviarF"" id=""btnEnviarF"">Guardar</button></td>
                            <td>");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f000ec9e7283d0eef3cd0b7144d71674b29ae7e514055", async() => {
                WriteLiteral("Regresar!");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("</td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n");
#nullable restore
#line 132 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
      await Html.RenderPartialAsync("_ValidationScriptsPartial");

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
    <script type=""text/javascript"">
        //cargar la fecha actual
        window.onload = function () {
            var fecha = new Date(); //Fecha actual
            var mes = fecha.getMonth() + 1; //obteniendo mes
            var dia = fecha.getDate(); //obteniendo dia
            var ano = fecha.getFullYear(); //obteniendo año
            if (dia < 10)
                dia = '0' + dia; //agrega cero si el menor de 10
            if (mes < 10)
                mes = '0' + mes //agrega cero si el menor de 10
            document.getElementById('fecha').value = ano + ""-"" + mes + ""-"" + dia;
        }

        //Cargar datos
        $(document).ready(function () {
        //cargar code de producto
        var IdProducto = $(""select[name=idProducto]"").val();
            $(""#idPro"").val(IdProducto);
        var Producto = $(""select[name=idProducto] option:selected"").text();
            $(""#dato"").val(Producto);
        //llenad o input
            $(""#idPro"").val(Producto);
            $");
                WriteLiteral(@"(""select[name=idProducto]"").change(function () {
                var IdProducto = $(""select[name=idProducto]"").val();
                    $(""#idPro"").val(IdProducto);
                var Producto = $(""select[name=idProducto] option:selected"").text();
                    $(""#idProducto"").val(Producto);
                    $(""#dato"").val(Producto);
            });
        //guardar detalle compra
        $(""#btnEnviar"").click(function () {
            var id = $(""#idPro"").val();
            var Producto = $(""#idProducto"").val();
            var dato = $(""#dato"").val();
            var cantidad = $(""#cantidad"").val();
            var precio = $(""#precio"").val();
            if (id == """" || Producto == """" || dato == """" || cantidad == """" || precio == """") {
                alert(""Faltan algunos datos."");
            }
            else {
                var subtt1 = $(""#subt1"").val();
                var subtotal = (cantidad * precio);
                var contador = $(""#fila"").html();
          ");
                WriteLiteral(@"      var HTML = ""<tr><td class='id'>"" + id + ""</td><td>"" + dato + ""</td><td>"" + cantidad + ""</td><td>"" + precio + ""</td><td>"" + subtotal + ""</td><td class='no'><button type='button' name='btnDelete' id='btnDelete' class='btn btn-danger btn-xs fas fa-trash'>Eliminar</button></td></tr> "";
                    $(""#fila"").html(contador + HTML);
                    $(""#idPro"").val("""");
                    $(""#dato"").val("""");
                    $(""#cantidad"").val("""");
                    $(""#precio"").val("""");
                var total = parseFloat(subtt1)+ parseFloat(subtotal);
                    $(""#subt1"").val(total)
                    $(""#total"").val(total)
            }
        });
        //Elimnar filas
        $('body').on('click', 'button#btnDelete', function () {
            //manejo de totales
            var col = $(this).parents('tr');
            var subTotalEliminar = col.find(""td:eq(4)"").text();
            var totalAC = $(""#subt1"").val();
            var total1 = parseFloat(total");
                WriteLiteral(@"AC) - parseFloat(subTotalEliminar);
            $(""#subt1"").val(total1);
            $(""#total"").val(total1);
            //removiendo fila
            $(this).parents('tr').remove();
        });

        //enviar factura
            $(""#btnEnviarF"").click(function () {
                var IdTienda = $(""select[name=IdTienda]"").val();
                var Codigo = $(""#codigo"").val();
                var Fecha = $(""#fecha"").val();

                if (IdTienda == """" || Codigo == """" || Fecha == """") {
                    alert(""Faltan algunos datos de la factura."");
                }
                else {
                    $.ajaxSetup({ async: false });
                    //cargando datos tabla primaria
                    var urlCompra = '");
#nullable restore
#line 214 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                Write(Url.Action("Ventas", "Create"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"';
                    var dataCompra = { id: IdTienda, codigo: Codigo, fecha: Fecha };
                        $.post(urlCompra, dataCompra)
                            .done(function (data) {
                                //alert(""Compra Creada con exito"")
                            })
                            .fail(function (data) {
                                console.log(""Error: "" + data.responseText);
                            }).
                            always(function () {
                            });
                        //creando detalleCompra
                        $("".id"").parent(""tr"").find(""td:eq(0)"").each(function () {
                            var columna = $(this).parents('tr');
                            var idProducto = columna.find(""td:eq(0)"").text();
                            //var Nombre = columna.find(""td:eq(1)"").text();
                            var Cantidad = columna.find(""td:eq(2)"").text();
                            var Precio = columna.");
                WriteLiteral("find(\"td:eq(3)\").text();\r\n                            var Total = columna.find(\"td:eq(4)\").text();\r\n                            //var TotalP = columna.find(\"td:eq(5)\").text();\r\n                            var urlDetalle = \'");
#nullable restore
#line 234 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                                         Write(Url.Action("Ventas", "Create"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"';
                            var dataDetalle = { idP: idProducto, cantidad: Cantidad,precio: Precio, stotal: Total };

                            $.post(urlDetalle, dataDetalle)
                                .done(function (data) {
                                })
                                .fail(function (data) {
                                    console.log(""Error: "" + data.responseText);
                                }).
                                always(function () {
                                });

                        });
                        var url = '");
#nullable restore
#line 247 "C:\Users\Alondra\Desktop\Prueba2Trabajo\ProyectoVentas\ProyectoVentasAB\ProyectoVentasAB\Views\Ventas\Create.cshtml"
                              Write(Url.Action("Index", "Ventas"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\';\r\n                        $(location).attr(\'href\', url);\r\n                    }\r\n                });\r\n    });\r\n    </script>\r\n");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<ProyectoVentasAB.Models.tblVentas> Html { get; private set; }
    }
}
#pragma warning restore 1591
